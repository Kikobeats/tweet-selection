/**
 * tweet-selection - Tweet selected text. Like Medium but out of the box.
 * @version 1.0.0
 * @link    https://github.com/kikobeats/tweet-selection
 * @author  Kiko Beats (https://github.com/kikobeats)
 * @license MIT
 */
!function(e){function t(e){var t=3,o=2;return e=e||window.event,e.which===t||e.button===o||!1}function o(){return window.getSelection().toString()}function i(e,t){var o=s.WORDS.MAX+s.QUOTE.LENGTH;return e.length>o&&(e=e.substring(0,o+t.ellipsis.length),e+=t.ellipsis),t.quoteLeft+e+t.quoteRight}function n(e){return e=e||{},e.selector=e.selector||s.SELECTOR,e.minimumTextSelected=e.minimumTextSelected||s.WORDS.MIN,e.shareClass=e.shareClass||s.SHARE_CLASS,e.height=(e.height||s.HEIGHT).toString(),e.width=(e.width||s.WIDTH).toString(),e.ellipsis=e.ellipsis||s.ELLIPSIS,e.quoteRight=e.quoteRight||s.QUOTE.RIGHT,e.quoteLeft=e.quoteLeft||s.QUOTE.LEFT,e}var s={WORDS:{MAX:107,MIN:3},ELLIPSIS:"…",SELECTOR:"body",HEIGHT:300,WIDTH:400,SHARE_CLASS:".tweet-selection",QUOTE:{LENGTH:2,LEFT:"“",RIGHT:"”"}};e.tweetSelection=function(s){function l(){e(s.shareClass).remove(),document.getSelection().removeAllRanges()}function r(t,o){var i=u.mouse.top-60,n=u.mouse.left+(o.clientX-u.mouse.left)/2,l='<a href="https://twitter.com/share?url='+encodeURIComponent(window.location.href);l+="&text="+encodeURIComponent(t),["hashtags","via","related"].forEach(function(e){s[e]&&(l+="&"+e+"="+encodeURIComponent(s[e]))}),l+="\" class='"+s.shareClass.substr(1)+" fade-in one'",l+=" onclick=\"window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,",l+="scrollbars=yes,height="+s.height,l+=",width="+s.width+"');return false;\"></a>",e("body").append(l),e(s.shareClass).css({position:"absolute",top:i,left:n})}s=n(s);var u={mouse:{},isVisible:!1};e(s.selector).mousedown(function(e){u.mouse.top=e.clientY+window.pageYOffset,u.mouse.left=e.clientX,!t(e)&&u.isVisible&&(l(),u.isVisible=!1)}),e(s.selector).mouseup(function(e){var n=o();n.length>s.minimumTextSelected&&!t(e)&&(r(i(n,s),e),u.isVisible=!0)})}}($);